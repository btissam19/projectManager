<!DOCTYPE html>
<html lang="es">
<head>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/CSS/dashboardout.css">
    <style>
        /* Agregar estilos para la vista de dispositivos peque√±os */
        @media (max-width: 768px) {
            .flex-wrap {
                display: flex;
                flex-wrap: wrap;
            }
            .section-small {
                width: 50%;
            }
        }
    </style>
</head>
<body>
<!-- component -->
<div class="overflow-x-auto">
        <div class="min-w-screen min-h-screen  flex items-center justify-center bg-gray-100 font-sans overflow-hidden">
            <div class="w-full lg:w-5/6">
                <div class="bg-white shadow-md rounded my-6">
{{!-- <table class="min-w-max w-full table-auto bg-white shadow-md rounded-lg" id="tablDom">
    <thead>
        <tr class="bg-gradient-to-r from-cyan-400 to-cyan-600 text-white">
            <th class="py-3 px-6 text-left font-bold uppercase text-sm leading-normal w-1/3">Project</th>
            <th class="py-3 px-6 text-center font-bold uppercase text-sm leading-normal w-1/3">Client Name</th>
            <th class="py-3 px-6 text-center font-bold uppercase text-sm leading-normal w-1/3">Status</th>
        </tr>
    </thead>
    <tbody class="text-gray-600 text-sm font-light divide-y divide-gray-200">
    {{#each truncs}}
        <tr class="hover:bg-gray-100 transition-all duration-200">
            <!-- Displaying the project name -->
            <td class="py-3 px-6 text-left w-">
                <div class="flex items-center">
                    <span class="font-medium">{{project}}</span>
                </div>
            </td>
            <!-- Displaying the client name -->
            <td class="py-3 px-6 text-center w-1/4">
                <span class="font-medium">{{client}}</span>
            </td>
            <!-- Displaying the status -->
            <td class="py-3 px-6 text-center w-1/4">
                <span class="bg-gradient-to-r from-cyan-400 to-cyan-600 text-white py-1 px-3 rounded-full">{{status}}</span>
            </td>
        </tr>
    {{/each}}
    </tbody>
</table> --}}
{{!-- <table class="min-w-max w-full table-auto bg-white shadow-md rounded-lg" id="tablDom">
    <thead>
        <tr class="bg-gradient-to-r from-cyan-400 to-cyan-600 text-white">
            <th class="py-3 px-6 text-left font-bold uppercase text-sm leading-normal w-1/3">Project</th>
            <th class="py-3 px-6 text-center font-bold uppercase text-sm leading-normal w-1/3">Client Name</th>
            <th class="py-3 px-6 text-center font-bold uppercase text-sm leading-normal w-1/3">Status</th>
        </tr>
    </thead>
    <tbody class="text-gray-600 text-sm font-light divide-y divide-gray-200">
    {{#each truncs}}
        <tr class="hover:bg-gray-100 transition-all duration-200">
            <!-- Displaying the project name -->
            <td class="py-3 px-6 text-left w-1/3">
                <div class="flex items-center">
                    <span class="font-medium">{{project}}</span>
                </div>
            </td>
            <!-- Displaying the client name -->
            <td class="py-3 px-6 text-center w-1/3">
                <span class="font-medium">{{client}}</span>
            </td>
            <!-- Displaying the status -->
            <td class="py-3 px-6 text-center w-1/3">
                <span class="bg-gradient-to-r from-cyan-400 to-cyan-600 text-white py-1 px-3 rounded-full">{{status}}</span>
            </td>
        </tr>
    {{else}}
       
    {{/each}}
    </tbody>
</table> --}}
{{#if truncs}}
    <table class="min-w-max w-full table-auto bg-white shadow-md rounded-lg" id="tablDom">
        <thead>
            <tr class="bg-gradient-to-r from-cyan-400 to-cyan-600 text-white">
                <th class="py-3 px-6 text-left font-bold uppercase text-sm leading-normal w-1/3">Project</th>
                <th class="py-3 px-6 text-center font-bold uppercase text-sm leading-normal w-1/3">Client Name</th>
                <th class="py-3 px-6 text-center font-bold uppercase text-sm leading-normal w-1/3">Status</th>
            </tr>
        </thead>
        <tbody class="text-gray-600 text-sm font-light ">
        {{#each truncs}}
            <tr class="hover:bg-gray-100 transition-all duration-200">
                <!-- Displaying the project name -->
                <td class="py-3 px-6 text-left w-1/3">
                    <div class="flex items-center">
                        <span class="font-medium">{{project}}</span>
                    </div>
                </td>
                <!-- Displaying the client name -->
                <td class="py-3 px-6 text-center w-1/3">
                    <span class="font-medium">{{client}}</span>
                </td>
                <!-- Displaying the status -->
                <td class="py-3 px-6 text-center w-1/3">
                    <span class="bg-gradient-to-r from-cyan-400 to-cyan-600 text-white py-1 px-3 rounded-full">{{status}}</span>
                </td>
            </tr>
        {{/each}}
        </tbody>
    </table>
{{else}}
    <div class="flex items-center justify-center h-56  text-3xl text-red-600 font-bold">
        No project affected to you  yet!!
    </div>
{{/if}}





 
</div>
<div class="text-center p-4" style="width: fit-content; margin: 0 auto;">
    <p class="bg-gradient-to-r from-cyan-400 to-cyan-600 text-white py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 mt-4 mb-6">
        <a href="/generalMessage" class="text-white">Message to Admin</a>
    </p>
    <p>
        <a href="/dashboard" class="text-cyan-600">back to dashboard</a>
    </p>
</div>



</div>
</div></div>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script >
    let tableDOM=document.getElementById('tablDom')
    tableDOM.addEventListener('click', async (e) => {
    const el = e.target;
    if (el.classList.contains('delete-btn') || el.parentElement.classList.contains('delete-btn')) {
        const deleteButton = el.classList.contains('delete-btn') ? el : el.parentElement;
        const id = deleteButton.dataset.id;
        try {
            const response = await axios.delete(`/transaction/${id}`);
            
            console.log("Response from server:", response);
                
            deleteButton.closest('tr').remove();
        } catch (error) {
            console.log("Error:", error);
        }
    }
});

</script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const nameElements = document.querySelectorAll('[data-email]');
            nameElements.forEach(el => {
                const email = el.getAttribute('data-email');
                const name = email.split('@')[0].split('.').join(' ');
                el.textContent = `Welcome Back ${name} !! here is a project you have to work on `;
            });
        });
    </script>
</body>
</html>